@{
    ViewData["Title"] = "Solicitar Restablecimiento";
    Layout = null;
}
<title>Restablecer contraseña</title>

<style>
    /* Estilos base consistentes con el login */
    body {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-image: url('/img/login/home-11.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
    }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 0;
        }

    .auth-container {
        position: relative;
        z-index: 1;
        width: 100%;
        max-width: 450px;
        padding: 0 20px;
    }

    .auth-card {
        padding: 40px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        box-shadow: 0 25px 45px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.1);
        overflow: hidden;
        position: relative;
    }

        .auth-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -40%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            transform: skewX(-15deg);
            pointer-events: none;
        }

        .auth-card h2 {
            color: #fff;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

            .auth-card h2 i {
                font-size: 1.3em;
            }

    /* Estilos para el formulario */
    .form-group {
        margin-bottom: 25px;
    }

        .form-group label {
            display: block;
            color: #fff;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
        }

    .form-control {
        width: 100%;
        padding: 12px 15px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 5px;
        color: #fff;
        font-size: 14px;
        transition: all 0.3s ease;
    }

        .form-control:focus {
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            box-shadow: none;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

    /* Estilos para el botón */
    .btn-primary {
        width: 100%;
        padding: 12px;
        background: linear-gradient(45deg, #1845ad, #23a2f6);
        border: none;
        border-radius: 5px;
        color: #fff;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

        .btn-primary:hover {
            background: linear-gradient(45deg, #23a2f6, #1845ad);
            transform: translateY(-2px);
        }

    /* Estilos para el footer */
    .auth-footer {
        margin-top: 25px;
        text-align: center;
    }

        .auth-footer a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

            .auth-footer a:hover {
                color: #23a2f6;
                text-decoration: underline;
            }

    /* Estilos para alertas */
    .alert {
        padding: 12px 15px;
        border-radius: 5px;
        margin-bottom: 25px;
        font-size: 14px;
    }

    .alert-danger {
        background-color: rgba(220, 53, 69, 0.2);
        border: 1px solid rgba(220, 53, 69, 0.3);
        color: #ff6b6b;
    }

    /* Estilos para el loader */
    .swal2-container {
        backdrop-filter: blur(5px);
    }
    .swal2-popup {
        background: transparent !important;
        box-shadow: none !important;
        padding: 0 !important;
    }
    .swal2-backdrop-show {
        background-color: rgba(0,0,0,0.7) !important;
    }
    .swal2-html-container {
        margin: 0 !important;
        padding: 0 !important;
    }

</style>
<div class="auth-container">
    <div class="auth-card">
        <h2><i class="fas fa-key"></i> Restablecer Contraseña</h2>

        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger">@ViewBag.Error</div>
        }

        <form asp-action="RequestResetPassword" method="post">
            <div class="form-group">
                <label>Correo Electrónico</label>
                <input type="email" name="email" class="form-control" required />
            </div>

            <button type="submit" class="btn btn-primary btn-block">
                <i class="fas fa-paper-plane"></i> Enviar Código
            </button>
        </form>

        <div class="auth-footer">
            <a href="/Login"><i class="fas fa-arrow-left"></i> Volver al Login</a>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const form = document.querySelector("form");

        form.addEventListener("submit", function(e) {
            // Mostrar loader transparente centrado
            Swal.fire({
                html: '<div class="spinner-border text-light" style="width: 3rem; height: 3rem;"></div>',
                position: 'center',
                background: 'transparent',
                backdrop: 'rgba(0,0,0,0.7)',
                showConfirmButton: false,
                allowOutsideClick: false,
                allowEscapeKey: false,
                showCloseButton: false,
                timer: 3000,
                didOpen: () => {
                    // Forzar mínimo 3 segundos de visualización
                    setTimeout(() => {
                        if(Swal.isVisible()) {
                            Swal.close();
                        }
                    }, 3000);
                }
            });

            return true;
        });

        @if (ViewBag.Error != null)
        {
                <text>
                setTimeout(() => {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: '@ViewBag.Error',
                        confirmButtonColor: '#23a2f6',
                        background: 'rgba(255,255,255,0.1)',
                        backdrop: 'rgba(0,0,0,0.5)'
                    });
                }, 100);
                </text>
        }
    });
</script>

